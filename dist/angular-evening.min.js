/*! angular-evening 18-08-2014 */
!function(){"use strict";angular.module("evening.evecollection",["thickm"]),angular.module("evening.evemodel",["thickm","evening.evecollection"]),angular.module("evening",["evening.evemodel","evening.evecollection"]),angular.module("evening.evecollection").factory("EveCollection",function(a,b,c){function d(){}b.extend(d,a),angular.extend(d,a),d._itemsField="_items",d._metaField="_meta";var e=function(a){a=a.split("?");var b=a.length>1?a[1].split("&"):a[0].split("&");if(""===b)return{};for(var c={},d=0;d<b.length;++d){var e=b[d].split("=");2===e.length&&(c[e[0]]=decodeURIComponent(e[1].replace(/\+/g," ")))}return c};return d.build=function(b,c){var d=a.build.call(this,b,c);return d._links=c.data._links,d},d.prototype.hasMore=function(){return angular.isDefined(this._links&&this._links.next)},d.prototype.loadMore=function(){var a=c.defer(),b=this;if(!this.hasMore())return a.reject(),a.promise;var d=e(this._links.next.href);return this._resourceClass.query(d).then(function(c){angular.forEach(c,function(a){b.push(a)}),b._links=c._links,b._meta.total=c._meta.total,b._meta.max_results+=c._meta.max_results,a.resolve(c)}),a.promise},d}),angular.module("evening.evemodel").factory("EveModel",function(a,b,c){function d(a){this._primaryField="_id",angular.extend(this,a),this._created="string"==typeof this._created?new Date(this._created):this._created,this._updated="string"==typeof this._updated?new Date(this._updated):this._updated}return b.extend(d,c),angular.extend(d,c),d._collectionClass=a,d.prototype.fieldsToApi=function(){var a={};return angular.forEach(this,function(b,c){("string"!=typeof c||"_"!==c.charAt(0))&&(a[c]=b)}),a},d.prototype.transformItemRequest=function(a){return this._etag&&(a["If-Match"]=this._etag),this.fieldsToApi()},d.search=function(a,b,c,d){return c=c||{$or:[]},b=b||{},a&&c.$or.push({$text:{$search:a,$language:d||"en"}}),0===c.$or.length&&(c={}),angular.extend(b,{where:c}),this.query(b)},d.query=function(a){for(var b in a)"object"==typeof a[b]&&(a[b]=JSON.stringify(a[b]));return c.query.call(this,a)},d})}(window,document);